"use strict";var _createClass=function(){function o(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,t){return n&&o(e.prototype,n),t&&o(e,t),e}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var Cart=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getGoodsNumAndUpdate",value:function(){for(var e=document.getElementsByClassName("goods-num"),n=0,t=0;t<e.length;t++)n+=Number(e[t].innerHTML);var o=document.getElementById("goods-total-nums");console.log(o.innerHTML),o.innerHTML=n}},{key:"getGoodsPriceAndUpdate",value:function(){for(var e=document.getElementsByClassName("goods-single-price"),n=0,t=0;t<e.length;t++)n+=Number(e[t].innerHTML);console.log(e.innerHTML);var o=document.getElementById("p2");console.log(o.innerHTML),o.innerHTML=n}},{key:"getGoodsSinglePrice",value:function(e,n){return e*n}},{key:"goodsAdd",value:function(e){var n=e.previousElementSibling;n.innerHTML=Number(n.innerHTML)+1;var t=e.parentNode.parentNode.nextElementSibling.firstElementChild;e.parentNode.parentNode.nextElementSibling.nextElementSibling.nextElementSibling.firstElementChild.innerHTML=this.getGoodsSinglePrice(n.innerHTML,t.innerHTML),this.getGoodsNumAndUpdate(),this.getGoodsPriceAndUpdate()}},{key:"goodsMin",value:function(e){var n,t=e.nextElementSibling;0<t.innerHTML&&(t.innerHTML=t.innerHTML-1,n=e.parentNode.nextElementSibling.firstElementChild,e.parentNode.nextElementSibling.nextElementSibling.firstElementChild.innerHTML=this.getGoodsSinglePrice(t.innerHTML,n.innerHTML),this.getGoodsNumAndUpdate(),this.getGoodsPriceAndUpdate())}},{key:"eventBind",value:function(){for(var e=document.getElementsByClassName("btn-crease"),n=this,t=0;t<e.length;t++)e[t].onclick=t%2==0?function(){n.goodsMin(this)}:function(){n.goodsAdd(this)};for(var o=document.getElementsByClassName("btn-delete"),s=0;s<o.length;s++)o[s].onclick=function(){n.remove(this),3==$("tr").length&&($(".nogoods").css({display:"block"}),$(".hadgoods").css({display:"none"}))}}},{key:"remove",value:function(e){e.parentNode.parentNode.remove(),this.getGoodsNumAndUpdate(),this.getGoodsPriceAndUpdate()}},{key:"addlist",value:function(){document.getElementsByClassName("goods-num"),document.getElementsByClassName("goods-single-price");var e,n=this,t=document.getElementById("cart_main"),o=localStorage.getItem("goodsname"),s=localStorage.getItem("goodsprice"),i=localStorage.getItem("goodsimg");console.log(o),null!=o&&null!=s&&null!=i?(e=document.createElement("tr"),t.lastElementChild.insertBefore(e,t.lastElementChild.lastElementChild.previousElementSibling),e.innerHTML='<td>\n                            <input type="checkbox" class="checkout_cb" checked="checked" />选择\n                        </td>\n                        <td>\n                            <div class="p-pic">\n                                <a href="detail.html " target="_blank "><img src='+i+' width="100 " height="100 "></a>\n                            </div>\n                        </td>\n                        <td class="p-info" colspan="2">\n                            <div class="p-title "><a href="#" style="font-weight: bold;color:#000 ">'+o+'</a></div>\n                        </td>\n                        <td>\n                            <div class="p-quantity">\n                                <button class="btn-crease">-</button>\n                                <span id="number1" class="goods-num">1</span>\n                                <button class="btn-crease">+</button>\n                            </div>\n                        </td>\n                        <td class="p-price">\n                            <div class="goods-price">'+s+'</div>\n                        </td>\n                        <td class="p-discount">\n                            <div>0.00</div>\n                        </td>\n                        <td class="p-subtotal">\n                            <div class="singleprice p-singlePrice goods-single-price" style="color:#ce5e5e;font-weight:bold">'+s+'</div>\n                        </td>\n                        <td class="p-action" style="width:130px;">\n                            <a class="btn-delete" style="color:#4a66b9;font-weight:bold ">移除</a>\n                        </td>',n.getGoodsNumAndUpdate(),n.getGoodsPriceAndUpdate(),n.getGoodsSinglePrice(),n.eventBind(),$(".nogoods").css({display:"none"}),$(".hadgoods").css({display:"block"}),localStorage.clear()):($(".nogoods").css({display:"block"}),$(".hadgoods").css({display:"none"}))}}]),e}(),c=new Cart;c.eventBind(),c.addlist();